<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="utf-8"> 
<script src="/static/js/jquery-3.3.1.js"></script>
<script src="/static/js/jquerysession.js"></script>
<link href="/static/bootstrap-4.0.0-dist/css/bootstrap.min.css" rel="stylesheet">
<script src="/static/bootstrap-4.0.0-dist/js/bootstrap.min.js"></script>
<script src="/static/thirdparty/popper.min.js"></script>
<link rel="stylesheet" href="/static/thirdparty/monokai_sublime.min.css">
<link href="/static/thirdparty/magnific-popup.min.css" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- <style> -->
<!-- a:visited{color:#343a40} -->
<!-- </style> -->

<script>


<!-- {% if request.session.username %}   -->
<!-- {% else %}   -->
	<!-- alert("请登陆") -->
	<!-- $(location).attr('href', '/login') -->
<!-- {% endif %}   -->

$(document).ready(function() {

	{% if request.session.searchcondition %}  
		$('#searchblogcondition').val("{{ request.session.searchcondition }}")
		//alert("{{ request.session.searchcondition }}")
	{% else %}  
		//alert("没有request.session.searchcondition")
	{% endif %}  
	
	
	
	function getCookie(name) {  
			var cookieValue = null;  
			if (document.cookie && document.cookie != '') {  
				var cookies = document.cookie.split(';');  
				for (var i = 0; i < cookies.length; i++) {  
					var cookie = jQuery.trim(cookies[i]);  
					// Does this cookie string begin with the name we want?  
					if (cookie.substring(0, name.length + 1) == (name + '=')) {  
						cookieValue = decodeURIComponent(cookie.substring(name.length + 1));  
						break;  
					}  
				}  
			}  
			return cookieValue;  
		}  
		function csrfSafeMethod(method) {  
			// these HTTP methods do not require CSRF protection  
			return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));  
		}  
		$.ajaxSetup({  
			beforeSend: function(xhr, settings) {  
			var csrftoken = getCookie('csrftoken');       
			if (!csrfSafeMethod(settings.type) && !this.crossDomain) {  
					xhr.setRequestHeader("X-CSRFToken", csrftoken);  
				}  
			}  
		}); 

  $('#searchblog').click(function(){
	//alert('search click')
	window.location.href='/blog/?pg=1&searchval='+$('#searchblogcondition').val(); 
  })
});


	



function HTMLEncode(html) {
    var temp = document.createElement("div");
    (temp.textContent != null) ? (temp.textContent = html) : (temp.innerText = html);
    var output = temp.innerHTML;
    temp = null;
    return output;
}

function HTMLDecode(text) { 
    var temp = document.createElement("div"); 
    temp.innerHTML = text; 
    var output = temp.innerText || temp.textContent; 
    temp = null; 
    return output; 
} 

  
</script>

<!-- <style> -->
<!-- body{background-color:#EFEFEF} -->
<!-- </style> -->

</head>

<body>

				
				
				
<!-- 轮播图开始 -->
<div class="container">
<div class="row">
<div class="col-sm-12" >
<div id="demo" class="carousel slide">
 
  <!-- 指示符 -->
  <ul class="carousel-indicators">
    <li data-target="#demo" data-slide-to="0" class="active"></li>
    <li data-target="#demo" data-slide-to="1"></li>
    <li data-target="#demo" data-slide-to="2"></li>
  </ul>
 
  <!-- 轮播图片 -->
  <div class="carousel-inner">
    <div class="carousel-item active" style="background-size:cover">
      <img src="/media/photos/7.bmp" >
	  <div class="carousel-caption">
        <h3>不忘初心</h3>
      </div>
    </div>
    <div class="carousel-item">
      <img src="/media/photos/8.jpg" >
	  <div class="carousel-caption">
        <h3>牢记使命</h3>
      </div>
    </div>
    <div class="carousel-item">
      <img src="/media/photos/9.jpg" >
	  <div class="carousel-caption">
        <h3>永远奋斗</h3>
      </div>
    </div>
  </div>
 
  <!-- 左右切换按钮 -->
  <a class="carousel-control-prev" href="#demo" data-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </a>
  <a class="carousel-control-next" href="#demo" data-slide="next">
    <span class="carousel-control-next-icon"></span>
  </a>
 
</div>
</div>
</div>
</div>
<!-- 轮播图结束 -->
 
 
<!-- 导航栏开始 -->
<div class="container" >
	<p></p>
	<!-- <div class="alert alert-light"> -->
	<ul class="nav  nav-tabs justify-content-center" >
		<li class="nav-item">
			<a class="nav-link " href="/blog/?pg=1&searchval=">首页</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="/didi">论坛</a>
		</li>
		<li class="nav-item">
			<a class="nav-link "  href="/publish">发布</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#">下载</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="#">关于</a>
		</li>
		
		<div class="form-inline justify-content-right" style="float:right;">
			{% csrf_token %}
			<input class="form-control" type="text" placeholder="Search" id="searchblogcondition" name="searchblogcondition" style="margin-right:2px">
			<button class="btn btn-default" type="submit" id="searchblog">Search</button>
		</div>
	</ul>
	
	<!-- </div> -->

</div>
<!-- 导航栏结束 -->


<div class="container" id="content" style="margin-top:15px">
	<div class="row">
		<div class="col-md-2">

			<div class="alert alert-light">
			    <!-- <h4 class="title">导航</h4> -->
				<nav class="navbar">
				  <ul class="navbar-nav">
					<li class="nav-item">
					  <h5><a class="nav-link " href="#">35KV</a></h5>
					</li>
					<li class="nav-item">
					  <h5><a class="nav-link" href="#">10KV</a></h5>
					</li>
					<li class="nav-item">
					  <h5><a class="nav-link" href="#">400V</a></h5>
					</li>
					<li class="nav-item">
					  <h5><a class="nav-link" href="#">动力</a></h5>
					</li>
					<li class="nav-item">
					  <h5><a class="nav-link" href="#">照明</a></h5>
					</li>
					<li class="nav-item">
					  <h5><a class="nav-link" href="#">消防</a></h5>
					</li>
					<li class="nav-item">
					  <h5><a class="nav-link" href="#">电池</a></h5>
					</li>
					<li class="nav-item">
					  <h5><a class="nav-link" href="#">柴发</a></h5>
					</li>
				  </ul> 
				</nav>
			
			</div>
		</div>
		<div class="col-md-10">
		<!-- <div class="alert alert-light"> -->
			<table class="table table-hover">
			  <thead>
				<tr>
				  <th scope="col" class="text-muted" style="border-top:0px"><h3><span class="badge badge-light">报&nbsp;&nbsp;告</span></h3></th>
				  <th scope="col" class="text-muted" style="border-top:0px"><h3><span class="badge badge-light">用&nbsp;&nbsp;户</span></h3></th>
				  <th scope="col" class="text-muted" style="border-top:0px"><h3><span class="badge badge-light">信&nbsp;&nbsp;息</span></h3></th>
				  <th scope="col" class="text-muted" style="border-top:0px"><h3><span class="badge badge-light">最&nbsp;后&nbsp;上&nbsp;传</span></h3></th>
				  <th scope="col" class="text-muted" style="border-top:0px"><h3><span class="badge badge-light">操&nbsp;&nbsp;作</span><button type="button" class="btn btn-outline-success btn-sm form-inline" data-toggle="modal" data-target="#myModal">新增</button></h3></th>
				</tr>
			  </thead>
			  <tbody>
				
				
				<tr class="table-success">
				  <th scope="row" class="text-info">配电运维报告</th>
				  <td>zhaobin</td>
				  <td>每日巡检</td>
				  <td>2018-04-17 20:31:36</td>
				  <td><button type="button" class="btn btn-outline-info btn-sm">下载</button><button type="button" class="btn btn-outline-info btn-sm">上传</button><button type="button" class="btn btn-outline-info btn-sm">日志</button></td>
				</tr>
				<tr class="table-default">
				  <th scope="row">配电运维报告</th>
				  <td>chenggeng</td>
				  <td>紧急事故</td>
				  <td>2018-04-17 20:31:36</td>
				  <td><button type="button" class="btn btn-outline-info btn-sm">下载</button><button type="button" class="btn btn-outline-info btn-sm">上传</button><button type="button" class="btn btn-outline-info btn-sm">日志</button></td>
				</tr>
				<tr class="table-success">
				  <th scope="row">配电运维报告</th>
				  <td>Column content</td>
				  <td>Column content</td>
				  <td>2018-04-17 20:31:36</td>
				  <td><button type="button" class="btn btn-outline-info btn-sm">下载</button><button type="button" class="btn btn-outline-info btn-sm">上传</button><button type="button" class="btn btn-outline-info btn-sm">日志</button></td>
				</tr>
				<tr class="table-default">
				  <th scope="row">配电运维报告</th>
				  <td>Column content</td>
				  <td>Column content</td>
				  <td>2018-04-17 20:31:36</td>
				  <td><button type="button" class="btn btn-outline-info btn-sm">下载</button><button type="button" class="btn btn-outline-info btn-sm">上传</button><button type="button" class="btn btn-outline-info btn-sm">日志</button></td>
				</tr>
				<tr class="table-success">
				  <th scope="row">配电运维报告</th>
				  <td>Column content</td>
				  <td>Column content</td>
				  <td>2018-04-17 20:31:36</td>
				  <td><button type="button" class="btn btn-outline-info btn-sm">下载</button><button type="button" class="btn btn-outline-info btn-sm">上传</button><button type="button" class="btn btn-outline-info btn-sm">日志</button></td>
				</tr>
				<tr class="table-default">
				  <th scope="row">配电运维报告</th>
				  <td>Column content</td>
				  <td>Column content</td>
				  <td>2018-04-17 20:31:36</td>
				  <td><button type="button" class="btn btn-outline-info btn-sm">下载</button><button type="button" class="btn btn-outline-info btn-sm">上传</button><button type="button" class="btn btn-outline-info btn-sm">日志</button></td>
				</tr>
				<tr class="table-success">
				  <th scope="row">配电运维报告</th>
				  <td>Column content</td>
				  <td>Column content</td>
				  <td>2018-04-17 20:31:36</td>
				  <td><button type="button" class="btn btn-outline-info btn-sm">下载</button><button type="button" class="btn btn-outline-info btn-sm">上传</button><button type="button" class="btn btn-outline-info btn-sm">日志</button></td>
				</tr>
				<tr class="table-default">
				  <th scope="row">配电运维报告</th>
				  <td>Column content</td>
				  <td>Column content</td>
				  <td>2018-04-17 20:31:36</td>
				  <td><button type="button" class="btn btn-outline-info btn-sm">下载</button><button type="button" class="btn btn-outline-info btn-sm">上传</button><button type="button" class="btn btn-outline-info btn-sm">日志</button></td>
				</tr>
				<tr class="table-success">
				  <th scope="row">配电运维报告</th>
				  <td>Column content</td>
				  <td>Column content</td>
				  <td>2018-04-17 20:31:36</td>
				  <td><button type="button" class="btn btn-outline-info btn-sm">下载</button><button type="button" class="btn btn-outline-info btn-sm">上传</button><button type="button" class="btn btn-outline-info btn-sm">日志</button></td>
				</tr>
				<tr class="table-default">
				  <th scope="row">配电运维报告</th>
				  <td>Column content</td>
				  <td>Column content</td>
				  <td>2018-04-17 20:31:36</td>
				  <td><button type="button" class="btn btn-outline-info btn-sm">下载</button><button type="button" class="btn btn-outline-info btn-sm">上传</button><button type="button" class="btn btn-outline-info btn-sm">日志</button></td>
				</tr>
			  </tbody>
			</table> 
		</div>
		<!-- </div> -->
	</div>
</div>



<!-- 模态框begin -->
<div class="modal fade" id="myModal">
  <div class="modal-dialog">
    <div class="modal-content">
 
      <!-- 模态框头部 -->
      <div class="modal-header">
        <h4 class="modal-title">上传报告</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
 
      <!-- 模态框主体 -->
      <div class="modal-body">
	  <form  action="/blog/?pg=1&searchval=" method="post"  enctype="multipart/form-data">
        <fieldset form>
		  <!-- <legend>Custom forms</legend> -->
		  
		  <div class="form-group">
			<div class="custom-control custom-radio">
			  <input type="radio" id="customRadio1" name="customRadio" class="custom-control-input" checked="">
			  <label class="custom-control-label" for="customRadio1">覆盖文件</label>
			</div>
			<div class="custom-control custom-radio">
			  <input type="radio" id="customRadio2" name="customRadio" class="custom-control-input">
			  <label class="custom-control-label" for="customRadio2">保存副本</label>
			</div>
			
		  </div>
		  <div class="form-group">
			<div class="custom-control custom-checkbox">
			  <input type="checkbox" class="custom-control-input" id="customCheck1" checked="">
			  <label class="custom-control-label" for="customCheck1">其他人只读权限</label>
			</div>
		  </div>
		  <div class="form-group">
			<select class="custom-select">
			  <option selected="">报告类型</option>
			  <option value="1">日常巡检</option>
			  <option value="2">紧急事故</option>
			  <option value="3">改造需求</option>
			</select>
		  </div>
		  <div class="form-group">
			<div class="input-group mb-3">
			  <div class="custom-file">
								
				<input id="reportfile" type="file" style="display:none">  
				<div class="input-append form-inline">  
					<input id="photoCover" class="form-control input-large" type="text" style="height:30px;"> 
					<a class="btn btn-outline-info btn-sm" onclick="$('input[id=reportfile]').click();">Browse</a> 
					<a class="btn btn-outline-info btn-sm" id="uploadreport">Upload</a> 
				</div>  
				   
				<script type="text/javascript">  
					$('input[id=reportfile]').change(function() {  
						$('#photoCover').val($(this).val());  
					});  
					
					$('#uploadreport').click(function(){
						alert($('#photoCover').val())
						//begin
						var form_data = new FormData();
						var file_info =$('#reportfile')[0].files[0];
						form_data.append('file',file_info);
						$.ajax({
								url:'/uploadreport',
								type:'POST',
								data: form_data,
								processData: false,  // tell jquery not to process the data
								contentType: false, // tell jquery not to set contentType
								success: function(report) {

									alert('upload report file succ:'+report)
								},
								error: function(xhr,status,errMsg){
									//alert(data)
									alert("upload report file  fail");
									alert(status)
									alert(errMsg)
								}
							//end
						})
					})
				</script> 
				
			  </div>
			  <div class="input-group-append">
				<!-- <input class="input-group-text" id="" type="submit" value="Upload"></input> -->
			  </div>
			</div>
		  </div>
		 
		</fieldset>
		</form> 
      </div>
 
      <!-- 模态框底部 -->
      <div class="modal-footer">
	    <!-- <input class="input-group-text" id="" type="submit" value="Upload"></input> -->
		<!-- <input type="submit" class="btn btn-success"></input> -->
        <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
      </div>
	
    </div>
  </div>
</div>
<!-- 模态框end -->
	
</body>
</html>